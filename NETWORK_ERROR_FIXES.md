# ๐ง ุฅุตูุงุญ ูุดุงูู ุฃุฎุทุงุก ุงูุดุจูุฉ ูุงูAPI

## ๐จ ุงููุดุงูู ุงูุชู ุชู ุญููุง

### 1. TypeError: Failed to fetch

- **ุงููุดููุฉ**: ูุดู ุทูุจุงุช API ุจุณุจุจ ุฃุฎุทุงุก ุงูุดุจูุฉ
- **ุงูุญู**: ูุธุงู ูุนุงูุฌุฉ ุฃุฎุทุงุก ูุญุณู ูุน ุฅุนุงุฏุฉ ุงููุญุงููุฉ ุงูุชููุงุฆูุฉ

### 2. ูุดู ูู ุงูุงุชุตุงู ุจุงูุฎุงุฏู

- **ุงููุดููุฉ**: ุฑุณุงุฆู ุฎุทุฃ ูุชูุฑุฑุฉ ุนูุฏ ููุฏุงู ุงูุงุชุตุงู
- **ุงูุญู**: ุงุณุชุฎุฏุงู ุงูุจูุงูุงุช ุงููุญููุธุฉ ูุญููุงู ูุจุฏูู

### 3. ุฃุฎุทุงุก ูุชูุฑุฑุฉ ูู ุงููููุณูู

- **ุงููุดููุฉ**: ุฅุฒุนุงุฌ ุงููุทูุฑูู ุจุฃุฎุทุงุก ูุชูุฑุฑุฉ
- **ุงูุญู**: ุชูููู ุนุฏุฏ ุฑุณุงุฆู ุงูุฎุทุฃ ูุฅููุงููุง ุนูุฏ ุงูุชูุฑุง๏ฟฝ๏ฟฝ

## โ ุงูุชุญุณููุงุช ุงููุถุงูุฉ

### ๐ ูุธุงู ุฅุนุงุฏุฉ ุงููุญุงููุฉ ุงูุฐูู

```typescript
// ุฅุนุงุฏุฉ ุงููุญุงููุฉ ุงูุชููุงุฆูุฉ ููุทูุจุงุช ุงููุงุดูุฉ
private async requestWithFallback<T>(
  endpoint: string,
  options: RequestInit = {},
  fallbackData?: T
): Promise<T>
```

**ุงูููุฒุงุช:**

- ุฅุนุงุฏุฉ ูุญุงููุฉ ูุงุญุฏุฉ ููุทูุจุงุช ุงููุงุดูุฉ
- ุงุณุชุฎุฏุงู ุงูุจูุงูุงุช ุงูุงุญุชูุงุทูุฉ ุนูุฏ ูุดู ุงูุทูุจ
- ุชุฃุฎูุฑ 1 ุซุงููุฉ ุจูู ุงููุญุงููุงุช

### ๐ฑ ูุฑุงูุจุฉ ุญุงูุฉ ุงูุงุชุตุงู

```typescript
// ูุฑุงูุจุฉ ุญุงูุฉ ุงูุฅูุชุฑูุช ูู ุงูููุช ุงููุนูู
const isOnline = useNetworkStatus();
```

**ุงูููุฒุงุช:**

- ุฅููุงู ุงูุทูุจุงุช ุนูุฏ ุนุฏู ูุฌูุฏ ุงุชุตุงู
- ุฅุดุนุงุฑ ุงููุณุชุฎุฏู ุจุญุงูุฉ ุงูุงุชุตุงู
- ุงุณุชููุงู ุงูุทูุจุงุช ุนูุฏ ุงุณุชุนุงุฏุฉ ุงูุงุชุตุงู

### ๐ฏ ูุนุงูุฌุฉ ุฃุฎุทุงุก ูุญุณูุฉ

```typescript
// ูุนุงูุฌ ุฃุฎุทุงุก ุดุงูู
const apiError = ApiErrorHandler.createErrorFromException(error);
```

**ุงูููุฒุงุช:**

- ุชุตููู ุงูุฃุฎุทุงุก (ุดุจูุฉุ ุฎุงุฏูุ ุตูุงุญูุงุช)
- ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ุจุงูุนุฑุจูุฉ
- ุงูุชุฑุงุญุงุช ููุญููู

### ๐ ุชูููู ุงูุถูุถุงุก ูู ุงููููุณูู

```typescript
// ุนุฏูุงุฏ ุงูุฃุฎุทุงุก ุงููุชุชุงููุฉ
setConsecutiveErrors((prev) => prev + 1);

// ุฅููุงู ุงูุทุจุงุนุฉ ุจุนุฏ 3 ุฃุฎุทุงุก ูุชุชุงููุฉ
if (consecutiveErrors < 3) {
  console.warn("ุชูุงุตูู ุงูุฎุทุฃ...");
}
```

## ๐๏ธ ุงููููุงุช ุงูููุญุฏุซุฉ

### 1. `client/lib/api-error-handler.ts` (ุฌุฏูุฏ)

- ูุธุงู ูุนุงูุฌุฉ ุฃุฎุทุงุก ุดุงูู
- ุชุตููู ุฃููุงุน ุงูุฃุฎุทุงุก
- ูุธุงู ุฅุนุงุฏุฉ ุงููุญุงููุฉ ุงูุฐูู

### 2. `client/lib/api.ts`

- ุฏุงูุฉ `requestWithFallback()` ุฌุฏูุฏุฉ
- ุงุณุชุฎุฏุงู ูุนุงูุฌ ุงูุฃุฎุทุงุก ุงููุญุณู
- ุจูุงูุงุช ุงุญุชูุงุทูุฉ ููุทูุจุงุช ุงููููุฉ

### 3. `client/hooks/use-message-notifications.ts`

- ูุฑุงูุจุฉ ุญุงูุฉ ุงูุงุชุตุงู
- ุชูููู ุชูุฑุงุฑ ุงููุญุต ุนูุฏ ุงูุฃุฎุทุงุก
- ุฅููุงู ูุคูุช ูููุญุต ุนูุฏ ุงูุฃุฎุทุงุก ุงููุชูุฑุฑุฉ

### 4. `client/components/Layout.tsx`

- ูุนุงูุฌุฉ ุฃุฎุทุงุก ุชุญููู ุนุฏุฏ ุงูุฑุณุงุฆู
- ุนุฏู ุชุญููู ุงูุจูุงูุงุช ุนูุฏ ุนุฏู ูุฌูุฏ ุงุชุตุงู

### 5. `client/components/NetworkStatusBanner.tsx` (ุฌุฏูุฏ)

- ุฅุดุนุงุฑ ุญุงูุฉ ุงูุงุชุตุงู ูููุณุชุฎุฏู
- ุฅุดุนุงุฑ ุงุณุชุนุงุฏุฉ ุงูุงุชุตุงู

### 6. `client/lib/chat-storage.ts`

- Hook ููุฑุงูุจ๏ฟฝ๏ฟฝ ุญุงูุฉ ุงูุดุจูุฉ
- ุฏุนู ุงูุนูู ุจุฏูู ุงุชุตุงู

## ๐ฏ ุงููุชุงุฆุฌ

### โ ูุจู ุงูุฅุตูุงุญ:

- ุฃุฎุทุงุก ูุชูุฑุฑุฉ ูู ุงููููุณูู โ
- ูุดู ุงูุชุทุจูู ุนูุฏ ููุฏุงู ุงูุงุชุตุงู โ
- ุนุฏู ูุฌูุฏ ุฑุฏูุฏ ูุนู ูููุณุชุฎุฏู โ
- ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุณูุฆุฉ โ

### โ ุจุนุฏ ุงูุฅุตูุงุญ:

- ุฑุณุงุฆู ุฎุทุฃ ุฃูู ูุฃูุถุญ โ
- ุนูู ุงูุชุทุจูู ุญุชู ุจุฏูู ุงุชุตุงู โ
- ุฅุดุนุงุฑุงุช ูุงุถุญุฉ ูููุณุชุฎุฏู โ
- ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุณูุณุฉ โ

## ๐ง ููููุฉ ุนูู ุงููุธุงู ุงูุฌุฏูุฏ

### 1. ุนูุฏ ุทูุจ ุงูุจูุงูุงุช:

```typescript
// ูุญุงููุฉ ุงูุทูุจ ุงูุฃููู
try {
  const data = await apiClient.getConversations();
  return data;
} catch (error) {
  // ูุญุต ููุน ุงูุฎุทุฃ
  if (isNetworkError(error)) {
    // ุงุณุชุฎุฏุงู ุงูุจูุงูุงุช ุงููุญููุธุฉ
    return fallbackData;
  }

  // ุฅุนุงุฏุฉ ุงููุญุงููุฉ ุฅุฐุง ูุงู ููููุงู
  if (canRetry(error)) {
    return await retryRequest();
  }
}
```

### 2. ูุฑุงูุจุฉ ุญุงูุฉ ุงูุงุชุตุงู:

```typescript
// ุฅููุงู ุงูุทูุจุงุช ุนูุฏ ุนุฏู ูุฌูุฏ ุงุชุตุงู
if (!isOnline) {
  console.log("ุชุฎุทู ุงูุทูุจ - ูุง ููุฌุฏ ุงุชุตุงู");
  return;
}

// ุงุณุชููุงู ุงูุทูุจุงุช ุนูุฏ ุงุณุชุนุงุฏุฉ ุงูุงุชุตุงู
useEffect(() => {
  if (isOnline && wasOffline) {
    retryPendingRequests();
  }
}, [isOnline]);
```

### 3. ุชูููู ุงูุฃุฎุทุงุก ูู ุงููููุณูู:

```typescript
// ุนุฏุงุฏ ุงูุฃุฎุทุงุก ุงููุชุชุงููุฉ
if (consecutiveErrors < 3) {
  console.warn("ุฎุทุฃ ูู API:", error.message);
} else if (consecutiveErrors === 3) {
  console.warn("ุชู ุฅููุงู ุทุจุงุนุฉ ุงูุฃุฎุทุงุก ูุชุฌูุจ ุงูุฅุฒุนุงุฌ");
}
```

## ๐ ุงูุชุญุณููุงุช ุงููุณุชูุจููุฉ

### 1. ูุธุงู ุทูุงุจูุฑ ููุทูุจุงุช ุงููุนููุฉ

- ุญูุธ ุงูุทูุจุงุช ุงููุงุดูุฉ ูู ูุงุฆูุฉ ุงูุชุธุงุฑ
- ุฅุนุงุฏุฉ ุฅุฑุณุงููุง ุนูุฏ ุงุณุชุนุงุฏุฉ ุงูุงุชุตุงู

### 2. ุฐุงูุฑุฉ ุชุฎุฒูู ูุคูุช ุฐููุฉ

- ุญูุธ ุงูุจูุงูุงุช ุชููุงุฆูุงู
- ุชุญุฏูุซ ุงูุจูุงูุงุช ูู ุงูุฎูููุฉ

### 3. ุฅุดุนุงุฑุงุช push ูููุณุชุฎุฏู

- ุฅุดุนุงุฑ ุนูุฏ ููุฏุงู ุงูุงุชุตุงู
- ุฅุดุนุงุฑ ุนูุฏ ุงุณุชุนุงุฏุฉ ุงูุงุชุตุงู

## ๐ก ูุตุงุฆุญ ููุชุทููุฑ

### 1. ุงุฎุชุจุงุฑ ุญุงูุงุช ุนุฏู ุงูุงุชุตุงู:

```javascript
// ูู DevTools Console
// ูุญุงูุงุฉ ุนุฏู ูุฌูุฏ ุงุชุตุงู
navigator.onLine = false;
window.dispatchEvent(new Event("offline"));

// ุงุณุชุนุงุฏุฉ ุงูุงุชุตุงู
navigator.onLine = true;
window.dispatchEvent(new Event("online"));
```

### 2. ูุฑุงูุจุฉ ุงูุฃุฎุทุงุก:

```javascript
// ูู DevTools Console
// ูุฑุงูุจุฉ ุฃุฎุทุงุก API
window.addEventListener("unhandledrejection", (event) => {
  console.log("ุฎุทุฃ ุบูุฑ ูุนุงูุฌ:", event.reason);
});
```

## ๐ ุงูุฎูุงุตุฉ

ุชู ุญู ุฌููุน ูุดุงูู ุฃุฎุทุงุก ุงูุดุจูุฉ ูุงูAPI ุจูุฌุงุญ:

โ **ูุง ุชูุฌุฏ ุฃุฎุทุงุก ูุชูุฑุฑุฉ** ูู ุงููููุณูู  
โ **ุงูุชุทุจูู ูุนูู ุจุฏูู ุงุชุตุงู** ูุน ุงูุจูุงูุงุช ุงููุญููุธุฉ  
โ **ุฅุดุนุงุฑุงุช ูุงุถุญุฉ** ูููุณุชุฎุฏู ุนู ุญุงูุฉ ุงูุงุชุตุงู  
โ **ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุณูุณุฉ** ุญุชู ูุน ูุดุงูู ุงูุดุจูุฉ  
โ **ูุธุงู ุฅุนุงุฏุฉ ูุญุงููุฉ ุฐูู** ููุทูุจุงุช ุงููุงุดูุฉ

ุงูุชุทุจูู ุฃุตุจุญ ุฃูุซุฑ ููุซูููุฉ ูููุงููุฉ ููุดุงูู ุงูุดุจูุฉ! ๐
