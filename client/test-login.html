<!doctype html>
<html dir="rtl" lang="ar">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ø§Ø®ØªØ¨Ø§Ø± Ø´Ø§Ù…Ù„ - ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆÙ„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</title>
    <style>
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        max-width: 1000px;
        margin: 0 auto;
        padding: 20px;
        background-color: #f5f5f5;
        direction: rtl;
      }
      .container {
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        margin-bottom: 20px;
      }
      .test-section {
        margin: 20px 0;
        padding: 15px;
        border: 1px solid #ddd;
        border-radius: 5px;
        background: #f9f9f9;
      }
      .success {
        border-color: #4caf50;
        background-color: #f8fff8;
      }
      .error {
        border-color: #f44336;
        background-color: #fff8f8;
      }
      .warning {
        border-color: #ff9800;
        background-color: #fffbf0;
      }
      .loading {
        border-color: #2196f3;
        background-color: #f8f9ff;
      }
      button {
        background: #007cba;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        margin: 5px;
      }
      button:hover {
        background: #005a87;
      }
      button:disabled {
        background: #ccc;
        cursor: not-allowed;
      }
      button.secondary {
        background: #6c757d;
      }
      button.danger {
        background: #dc3545;
      }
      button.success {
        background: #28a745;
      }
      pre {
        background: #f0f0f0;
        padding: 10px;
        border-radius: 5px;
        overflow-x: auto;
        max-height: 200px;
        overflow-y: auto;
        font-size: 12px;
      }
      .status-indicator {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        display: inline-block;
        margin-left: 10px;
      }
      .status-ok {
        background: #4caf50;
      }
      .status-error {
        background: #f44336;
      }
      .status-warning {
        background: #ff9800;
      }
      .status-loading {
        background: #2196f3;
        animation: pulse 1s infinite;
      }
      @keyframes pulse {
        0% {
          opacity: 1;
        }
        50% {
          opacity: 0.5;
        }
        100% {
          opacity: 1;
        }
      }
      .user-card {
        border: 1px solid #ddd;
        padding: 10px;
        margin: 5px;
        border-radius: 5px;
        background: white;
        display: inline-block;
        vertical-align: top;
        width: 300px;
      }
      .user-card h4 {
        margin: 0 0 10px 0;
        color: #333;
      }
      .credentials {
        font-family: monospace;
        background: #f0f0f0;
        padding: 5px;
        border-radius: 3px;
        margin: 5px 0;
      }
      .navigation-buttons {
        text-align: center;
        margin: 20px 0;
      }
      .navigation-buttons button {
        font-size: 16px;
        padding: 15px 25px;
        margin: 10px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>ğŸ§ª Ø§Ø®ØªØ¨Ø§Ø± Ø´Ø§Ù…Ù„ Ù„Ù„ØªØ·Ø¨ÙŠÙ‚</h1>
      <p>Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø© ØªØ³Ø§Ø¹Ø¯ ÙÙŠ Ø§Ø®ØªØ¨Ø§Ø± Ø¬Ù…ÙŠØ¹ ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø®Ø·ÙˆØ© Ø¨Ø®Ø·ÙˆØ©</p>

      <!-- Navigation Links -->
      <div class="navigation-buttons">
        <button onclick="window.open('/', '_blank')" class="success">
          ğŸ  Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
        </button>
        <button onclick="window.open('/auth', '_blank')" class="secondary">
          ğŸ”‘ ØµÙØ­Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
        </button>
        <button onclick="window.open('/dashboard', '_blank')" class="secondary">
          ğŸ“Š Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
        </button>
        <button onclick="window.open('/debug-api.html', '_blank')">
          ğŸ”§ ÙØ­Øµ API
        </button>
      </div>

      <!-- Test Users -->
      <div class="test-section">
        <h3>ğŸ‘¥ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠÙŠÙ†</h3>
        <p>
          <strong>ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†:</strong>
          <span class="credentials">123456</span>
        </p>

        <div style="display: flex; flex-wrap: wrap; gap: 10px">
          <!-- Customers -->
          <div class="user-card">
            <h4>ğŸ‘¤ Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯ (Ø¹Ù…ÙŠï¿½ï¿½)</h4>
            <div class="credentials">ahmed.customer@example.com</div>
            <button onclick="testLogin('ahmed.customer@example.com', '123456')">
              ğŸ”‘ ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„
            </button>
            <button onclick="copyToClipboard('ahmed.customer@example.com')">
              ğŸ“‹ Ù†Ø³Ø® Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„
            </button>
          </div>

          <div class="user-card">
            <h4>ğŸ‘¤ ÙÙ‡Ø¯ Ø§Ù„Ø¹ØªÙŠØ¨ÙŠ (Ø¹Ù…ÙŠÙ„)</h4>
            <div class="credentials">fahad.customer@example.com</div>
            <button onclick="testLogin('fahad.customer@example.com', '123456')">
              ğŸ”‘ ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„
            </button>
            <button onclick="copyToClipboard('fahad.customer@example.com')">
              ğŸ“‹ Ù†Ø³Ø® Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„
            </button>
          </div>

          <!-- Barbers -->
          <div class="user-card">
            <h4>âœ‚ï¸ Ø¹Ø¨Ø¯Ø§Ù„Ø±Ø­Ù…Ù† Ø§Ù„Ø­Ù„Ø§Ù‚ (Ø­Ù„Ø§Ù‚)</h4>
            <div class="credentials">barber1@halaga.app</div>
            <button onclick="testLogin('barber1@halaga.app', '123456')">
              ğŸ”‘ ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„
            </button>
            <button onclick="copyToClipboard('barber1@halaga.app')">
              ğŸ“‹ Ù†Ø³Ø® Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„
            </button>
          </div>

          <div class="user-card">
            <h4>âœ‚ï¸ Ù…Ø­Ù…Ø¯ Ø§Ù„Ù…Ø§Ù‡Ø± (Ø­Ù„Ø§Ù‚)</h4>
            <div class="credentials">barber2@halaga.app</div>
            <button onclick="testLogin('barber2@halaga.app', '123456')">
              ğŸ”‘ ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„
            </button>
            <button onclick="copyToClipboard('barber2@halaga.app')">
              ğŸ“‹ Ù†Ø³Ø® Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„
            </button>
          </div>

          <!-- Admin -->
          <div class="user-card">
            <h4>ğŸ‘‘ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù†Ø¸Ø§Ù… (Ù…Ø¯ÙŠØ±)</h4>
            <div class="credentials">super.admin@halaga.app</div>
            <button onclick="testLogin('super.admin@halaga.app', '123456')">
              ğŸ”‘ ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„
            </button>
            <button onclick="copyToClipboard('super.admin@halaga.app')">
              ğŸ“‹ Ù†Ø³Ø® Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„
            </button>
          </div>
        </div>
      </div>

      <!-- Login Test Results -->
      <div class="test-section" id="login-section">
        <h3>
          <span class="status-indicator" id="login-status"></span>
          ğŸ”‘ Ù†ØªØ§Ø¦Ø¬ Ø§Ø®ØªØ¨Ø§Ø± ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
        </h3>
        <div id="login-result"></div>
      </div>

      <!-- API Tests -->
      <div class="test-section" id="api-section">
        <h3>
          <span class="status-indicator" id="api-status"></span>
          ğŸŒ Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª API
        </h3>
        <button onclick="testAllAPIs()">ğŸš€ Ø§Ø®ØªØ¨Ø§Ø± Ø¬Ù…ÙŠØ¹ APIs</button>
        <button onclick="testBarbersAPI()">ğŸ‘¥ Ø§Ø®ØªØ¨Ø§Ø± API Ø§Ù„Ø­Ù„Ø§Ù‚ÙŠÙ†</button>
        <button onclick="testAuthAPI()">ğŸ” Ø§Ø®ØªØ¨Ø§Ø± API Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©</button>
        <div id="api-result"></div>
      </div>

      <!-- System Status -->
      <div class="test-section" id="system-section">
        <h3>ğŸ“Š Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù…</h3>
        <button onclick="checkSystemStatus()">ğŸ” ÙØ­Øµ Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù…</button>
        <button onclick="clearLocalStorage()">ğŸ§¹ Ù…Ø³Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©</button>
        <div id="system-result"></div>
      </div>

      <!-- Debug Tools -->
      <div class="test-section">
        <h3>ğŸ› ï¸ Ø£Ø¯ÙˆØ§Øª Ø§Ù„ØªØ´Ø®ÙŠØµ</h3>
        <button onclick="exportLogs()">ğŸ“¤ ØªØµØ¯ÙŠØ± Ø§Ù„Ø³Ø¬Ù„Ø§Øª</button>
        <button onclick="showLocalStorage()">ğŸ’¾ Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©</button>
        <button onclick="testCookies()">ğŸª Ø§Ø®ØªØ¨Ø§Ø± Cookies</button>
        <button onclick="testNetworkSpeed()">ğŸŒ Ø§Ø®Øªï¿½ï¿½Ø§Ø± Ø³Ø±Ø¹Ø© Ø§Ù„Ø´Ø¨ÙƒØ©</button>
      </div>
    </div>

    <script>
      let testLogs = [];

      function log(message, type = "info") {
        const timestamp = new Date().toLocaleString("ar-SA");
        const logEntry = { timestamp, message, type };
        testLogs.push(logEntry);
        console.log(`[${type.toUpperCase()}] ${message}`);
      }

      function setStatus(elementId, status) {
        const element = document.getElementById(elementId);
        if (element) {
          element.className = "status-indicator";
          element.classList.add(`status-${status}`);
        }
      }

      function updateSection(sectionId, className) {
        const section = document.getElementById(sectionId);
        if (section) {
          section.className = "test-section " + className;
        }
      }

      async function testLogin(email, password) {
        setStatus("login-status", "loading");
        updateSection("login-section", "loading");

        const resultDiv = document.getElementById("login-result");
        resultDiv.innerHTML = "<p>Ø¬Ø§Ø±ÙŠ Ø§Ø®ØªØ¨Ø§Ø± ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„...</p>";

        try {
          log(`Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„: ${email}`);

          const response = await fetch("/api/login", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({ email, password }),
          });

          const data = await response.json();

          if (response.ok && data.user) {
            setStatus("login-status", "ok");
            updateSection("login-section", "success");

            log(`Ù†Ø¬Ø­ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„: ${data.user.name} (${data.user.role})`);

            resultDiv.innerHTML = `
                        <p>âœ… <strong>Ù†Ø¬Ø­ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„!</strong></p>
                        <p>Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${data.user.name}</p>
                        <p>Ø§Ù„Ù†ÙˆØ¹: ${data.user.role}</p>
                        <p>Ø§Ù„Ø¨Ø±ÙŠØ¯: ${data.user.email}</p>
                        <p>Ø§Ù„Ø­Ø§Ù„Ø©: ${data.user.status}</p>
                        <button onclick="openDashboard('${data.token}', '${data.user.role}')">
                            ğŸ“Š ÙØªØ­ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
                        </button>
                        <button onclick="logout()">ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</button>
                        <details>
                            <summary>Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙƒØ§Ù…Ù„Ø©</summary>
                            <pre>${JSON.stringify(data, null, 2)}</pre>
                        </details>
                    `;

            // Save login info
            localStorage.setItem("authToken", data.token);
            localStorage.setItem("currentUser", JSON.stringify(data.user));
          } else {
            throw new Error(data.error || "ÙØ´Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„");
          }
        } catch (error) {
          setStatus("login-status", "error");
          updateSection("login-section", "error");

          log(`ÙØ´Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„: ${error.message}`, "error");

          resultDiv.innerHTML = `
                    <p>âŒ <strong>ÙØ´Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„!</strong></p>
                    <p>Ø§Ù„Ø®Ø·Ø£: ${error.message}</p>
                    <button onclick="testLogin('${email}', '${password}')">ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©</button>
                `;
        }
      }

      async function testBarbersAPI() {
        setStatus("api-status", "loading");
        updateSection("api-section", "loading");

        const resultDiv = document.getElementById("api-result");
        resultDiv.innerHTML = "<p>Ø¬Ø§Ø±ÙŠ Ø§Ø®ØªØ¨Ø§Ø± API Ø§Ù„Ø­Ù„Ø§Ù‚ÙŠÙ†...</p>";

        try {
          const token = localStorage.getItem("authToken");
          const headers = {
            "Content-Type": "application/json",
          };

          if (token) {
            headers["Authorization"] = `Bearer ${token}`;
          }

          const response = await fetch("/api/barbers", { headers });
          const data = await response.json();

          if (response.ok) {
            setStatus("api-status", "ok");
            updateSection("api-section", "success");

            log(`Ù†Ø¬Ø­ ØªØ­Ù…ÙŠÙ„ ${data.barbers?.length || 0} Ø­Ù„Ø§Ù‚`);

            resultDiv.innerHTML = `
                        <p>âœ… <strong>Ù†Ø¬Ø­ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø­Ù„Ø§Ù‚ÙŠÙ†!</strong></p>
                        <p>Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ù„Ø§Ù‚ÙŠÙ†: ${data.barbers?.length || 0}</p>
                        ${
                          data.barbers && data.barbers.length > 0
                            ? `
                            <h4>Ø§Ù„Ø­Ù„Ø§Ù‚ÙŠÙ† Ø§Ù„Ù…ØªØ§Ø­ÙŠÙ†:</h4>
                            <ul>
                                ${data.barbers
                                  .map(
                                    (barber) =>
                                      `<li>${barber.name} - ${barber.status} - Ø§Ù„Ù…Ø³ØªÙˆÙ‰: ${barber.level}</li>`,
                                  )
                                  .join("")}
                            </ul>
                        `
                            : "<p>âš ï¸ Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ù„Ø§Ù‚ÙŠÙ† ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</p>"
                        }
                        <details>
                            <summary>Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙƒØ§Ù…Ù„Ø©</summary>
                            <pre>${JSON.stringify(data, null, 2)}</pre>
                        </details>
                    `;
          } else {
            throw new Error(
              data.error || `HTTP ${response.status}: ${response.statusText}`,
            );
          }
        } catch (error) {
          setStatus("api-status", "error");
          updateSection("api-section", "error");

          log(`ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø­Ù„Ø§Ù‚ÙŠÙ†: ${error.message}`, "error");

          resultDiv.innerHTML = `
                    <p>âŒ <strong>ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø­Ù„Ø§Ù‚ÙŠÙ†!</strong></p>
                    <p>Ø§Ù„Ø®Ø·Ø£: ${error.message}</p>
                    <button onclick="testBarbersAPI()">ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©</button>
                `;
        }
      }

      async function testAllAPIs() {
        const endpoints = [
          { name: "Ping", url: "/api/ping", method: "GET" },
          { name: "Barbers", url: "/api/barbers", method: "GET" },
          { name: "Posts", url: "/api/posts", method: "GET" },
        ];

        const resultDiv = document.getElementById("api-result");
        resultDiv.innerHTML = "<p>Ø¬Ø§Ø±ÙŠ Ø§Ø®ØªØ¨Ø§Ø± Ø¬Ù…ÙŠØ¹ APIs...</p>";

        let results = [];

        for (const endpoint of endpoints) {
          try {
            const token = localStorage.getItem("authToken");
            const headers = {};

            if (token && endpoint.name !== "Ping") {
              headers["Authorization"] = `Bearer ${token}`;
            }

            const response = await fetch(endpoint.url, {
              method: endpoint.method,
              headers,
            });

            const data =
              endpoint.name === "Ping"
                ? await response.text()
                : await response.json();

            results.push({
              name: endpoint.name,
              status: response.ok ? "Ù†Ø¬Ø­" : "ÙØ´Ù„",
              statusCode: response.status,
              data: data,
            });

            log(`${endpoint.name} API: ${response.ok ? "Ù†Ø¬Ø­" : "ÙØ´Ù„"}`);
          } catch (error) {
            results.push({
              name: endpoint.name,
              status: "Ø®Ø·Ø£",
              error: error.message,
            });

            log(`${endpoint.name} API: Ø®Ø·Ø£ - ${error.message}`, "error");
          }
        }

        const allSuccess = results.every((r) => r.status === "Ù†Ø¬Ø­");
        setStatus("api-status", allSuccess ? "ok" : "error");
        updateSection("api-section", allSuccess ? "success" : "error");

        resultDiv.innerHTML = `
                <h4>Ù†ØªØ§Ø¦Ø¬ Ø§Ø®ØªØ¨Ø§Ø± APIs:</h4>
                <ul>
                    ${results
                      .map(
                        (result) => `
                        <li>
                            <strong>${result.name}:</strong> 
                            ${result.status === "Ù†Ø¬Ø­" ? "âœ…" : "âŒ"} 
                            ${result.status}
                            ${result.statusCode ? ` (${result.statusCode})` : ""}
                            ${result.error ? ` - ${result.error}` : ""}
                        </li>
                    `,
                      )
                      .join("")}
                </ul>
                <details>
                    <summary>Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ØªÙØµÙŠÙ„ÙŠØ©</summary>
                    <pre>${JSON.stringify(results, null, 2)}</pre>
                </details>
            `;
      }

      function openDashboard(token, role) {
        localStorage.setItem("authToken", token);
        window.open("/dashboard", "_blank");
      }

      function logout() {
        localStorage.removeItem("authToken");
        localStorage.removeItem("currentUser");
        document.getElementById("login-result").innerHTML =
          "<p>âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø¨Ù†Ø¬Ø§Ø­</p>";
        log("ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬");
      }

      function copyToClipboard(text) {
        navigator.clipboard.writeText(text).then(() => {
          alert(`ØªÙ… Ù†Ø³Ø®: ${text}`);
        });
      }

      function checkSystemStatus() {
        const resultDiv = document.getElementById("system-result");
        const user = JSON.parse(localStorage.getItem("currentUser") || "null");
        const token = localStorage.getItem("authToken");

        resultDiv.innerHTML = `
                <h4>ğŸ“Š Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…:</h4>
                <p><strong>Ø§Ù„Ù…Ø¶ÙŠÙ:</strong> ${window.location.hostname}</p>
                <p><strong>Ø§Ù„Ø±Ø§Ø¨Ø·:</strong> ${window.location.href}</p>
                <p><strong>Ù†ÙˆØ¹ Ø§Ù„Ù†Ø´Ø±:</strong> ${window.location.hostname.includes("netlify") ? "Netlify" : "Ù…Ø­Ù„ÙŠ"}</p>
                <p><strong>Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ:</strong> ${user ? `${user.name} (${user.role})` : "ØºÙŠØ± Ù…Ø³Ø¬Ù„"}</p>
                <p><strong>Ø±Ù…Ø² Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©:</strong> ${token ? "Ù…ÙˆØ¬ÙˆØ¯" : "ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯"}</p>
                <p><strong>Local Storage:</strong> ${Object.keys(localStorage).length} Ø¹Ù†ØµØ±</p>
                <p><strong>ÙˆÙ‚Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±:</strong> ${new Date().toLocaleString("ar-SA")}</p>
            `;
      }

      function clearLocalStorage() {
        localStorage.clear();
        alert("ØªÙ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©");
        log("ØªÙ… Ù…Ø³Ø­ Local Storage");
      }

      function exportLogs() {
        const logsText = testLogs
          .map(
            (log) =>
              `[${log.timestamp}] ${log.type.toUpperCase()}: ${log.message}`,
          )
          .join("\n");

        const blob = new Blob([logsText], { type: "text/plain" });
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = `test-logs-${new Date().toISOString().split("T")[0]}.txt`;
        a.click();
        URL.revokeObjectURL(url);
      }

      function showLocalStorage() {
        const storage = {};
        for (let key of Object.keys(localStorage)) {
          storage[key] = localStorage.getItem(key);
        }

        const resultDiv = document.getElementById("system-result");
        resultDiv.innerHTML = `
                <h4>ğŸ’¾ Ù…Ø­ØªÙˆÙŠØ§Øª Local Storage:</h4>
                <pre>${JSON.stringify(storage, null, 2)}</pre>
            `;
      }

      // Initialize
      window.addEventListener("load", () => {
        log("ï¿½ï¿½Ù… ØªØ­Ù…ÙŠÙ„ ØµÙØ­Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø´Ø§Ù…Ù„");
        checkSystemStatus();

        // Auto-run basic tests
        setTimeout(() => {
          testBarbersAPI();
        }, 1000);
      });
    </script>
  </body>
</html>
